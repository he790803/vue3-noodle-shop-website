import{_ as Q,x as Y,s as ee,r as a,k as H,o as se,g as ae,E as te,y as f,b as u,c as i,e,z as g,A as P,t as n,B as b,C as oe,u as E,F as le,f as ne,n as ue,j as ie,p as re,i as de}from"./index-7641fed2.js";import{u as Z}from"./shopping-7054cb3f.js";import{N as ce}from"./NumInput-8e46ab76.js";const l=y=>(re("data-v-ab2fffec"),y=y(),de(),y),ve={class:"userSection"},_e=l(()=>e("div",{class:"mainTitle"},[e("h1",null,"收件者資料")],-1)),me={class:"userInformation"},pe={class:"inputBox userName"},he=l(()=>e("label",{for:"userName"},"姓名",-1)),fe={key:0},ge={class:"inputBox userPhone"},be=l(()=>e("label",{for:"userPhone"},"電話",-1)),ye={key:0},ke={class:"inputBox userAddress"},Pe=l(()=>e("label",{for:"userAddress"},"收件地址",-1)),Ee={key:0},xe={class:"inputBox userEmail"},Be=l(()=>e("label",{for:"userEmail"},"電子郵件",-1)),Se={key:0},Ce={class:"inputBox userPayment"},Ne=l(()=>e("option",{disabled:"disabled",selected:"selected",value:""},"付款方式",-1)),Ae=l(()=>e("option",{value:"visa"},"Visa",-1)),Ie=l(()=>e("option",{value:"linePay"},"LinePay",-1)),Ue=l(()=>e("option",{value:"paypal"},"Paypal",-1)),Ve=[Ne,Ae,Ie,Ue],Me=l(()=>e("label",{for:"userPayment"},"付款方式",-1)),Te={key:0},qe={class:"submitBtn"},ze=["disabled"],Le={class:"itemSection"},Re={class:"itemDescription"},we={class:"mainTitle"},De=l(()=>e("h1",null,"購物車",-1)),He={class:"itemList"},Ze=["onAnimationend"],$e={class:"itemImg"},Fe=["src"],Oe={class:"itemInformation"},je={class:"title"},Ge={class:"itemTotalPriceGroup"},We={class:"itemNum"},Xe={class:"itemTotalPrice"},Je=["onClick"],Ke={class:"totalPrice"},Qe={__name:"ShoppingCar",setup(y){const M=Y(),$=Z(),{removeShoppingCarItem:T}=Z(),{shoppingCar:r,orderList:F}=ee($),q=a(null),d=a(""),k=a(""),x=a(!1),v=a(""),B=a(""),S=a(!1),_=a(""),C=a(""),N=a(!1),m=a(""),A=a(""),I=a(!1),p=a(""),U=a(""),V=a(!1),c=a(!1),h=a(null),O=()=>{r.value.length<=0?alert("購物車是空的喔!"):(F.value.push({user:{name:d.value,phone:v.value,address:_.value,email:m.value,payMent:p.value},item:r.value}),M.push("/complete"))},j=(o,t)=>{r.value.map(s=>{s.id===t&&(s.number=o)})},G=o=>{c.value=!0,h.value=o,setTimeout(()=>{T(o),c.value=!1,h.value=null},500)},W=o=>{c.value&&h.value===o&&(T(o),c.value=!1,h.value=null)},X=H(()=>{let o=0;return r.value.forEach(t=>{o+=t.price*t.number}),o}),J=H(()=>!(!d.value||k.value)),K=()=>{M.go(-1)},z=()=>{d.value?(x.value=!1,k.value=""):(x.value=!0,k.value="收件人不得為空!")},L=()=>{/^(09)[0-9]{8}$/.test(v.value)?(S.value=!1,B.value=""):(S.value=!0,B.value="手機格式錯誤!")},R=()=>{_.value?(N.value=!1,C.value=""):(N.value=!0,C.value="收件地址不得為空!")},w=()=>{/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(m.value)?(I.value=!1,A.value=""):(I.value=!0,A.value="Email格式錯誤!")},D=()=>{p.value?(V.value=!1,U.value=""):(V.value=!0,U.value="請選擇付款方式!")};return se(()=>{ae.to(q.value,{duration:1.5,width:"100%",ease:te.easeInOut})}),f(d,z,{immediate:!1,deep:!1,debounce:500}),f(v,L,{immediate:!1,deep:!1,debounce:500}),f(_,R,{immediate:!1,deep:!1,debounce:500}),f(m,w,{immediate:!1,deep:!1,debounce:500}),f(p,D,{immediate:!1,deep:!1,debounce:500}),(o,t)=>(u(),i("div",{class:"ShoppingCar",ref_key:"background",ref:q},[e("div",ve,[_e,e("div",me,[e("div",pe,[g(e("input",{type:"text",id:"userName",required:"required","onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),onBlur:z},null,544),[[P,d.value]]),he,x.value?(u(),i("span",fe,n(k.value),1)):b("",!0)]),e("div",ge,[g(e("input",{type:"tel",name:"userPhone",id:"userPhone",required:"required","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),onBlur:L},null,544),[[P,v.value]]),be,S.value?(u(),i("span",ye,n(B.value),1)):b("",!0)]),e("div",ke,[g(e("input",{type:"text",name:"userAddress",required:"required","onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),onBlur:R},null,544),[[P,_.value]]),Pe,N.value?(u(),i("span",Ee,n(C.value),1)):b("",!0)]),e("div",xe,[g(e("input",{type:"text",name:"userEmail",required:"required","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),onBlur:w},null,544),[[P,m.value]]),Be,I.value?(u(),i("span",Se,n(A.value),1)):b("",!0)]),e("div",Ce,[g(e("select",{name:"userPayment",id:"userPayment","onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),onBlur:D},Ve,544),[[oe,p.value]]),Me,V.value?(u(),i("span",Te,n(U.value),1)):b("",!0)])]),e("div",qe,[e("button",{onClick:K},"回上一頁"),e("button",{disabled:o.disabled=!E(J),onClick:O},"送出訂單",8,ze)])]),e("div",Le,[e("div",Re,[e("div",we,[De,e("p",null,"已選購"+n(E(r).length)+"項",1)]),e("div",He,[(u(!0),i(le,null,ne(E(r),(s,Ye)=>(u(),i("div",{class:ue(["item",{animate__animated:c.value,animate__bounceOutRight:c.value&&h.value===s.id}]),key:s.id,onAnimationend:es=>W(s.id)},[e("div",$e,[e("img",{src:s.imgLink},null,8,Fe)]),e("div",Oe,[e("div",je,[e("div",null,n(s.name),1)]),e("div",Ge,[e("div",We,[ie(ce,{onNumControlHandler:j,defineBuyNum:s.number,index:s.id},null,8,["defineBuyNum","index"])]),e("div",Xe,[e("p",null,"單價:"+n(s.price)+"元",1),e("p",null,"小計:"+n(s.price*s.number)+"元",1)])]),e("div",{class:"cancelBtn",onClick:()=>G(s.id)},"X",8,Je)])],42,Ze))),128))])]),e("div",Ke,[e("p",null,"總計:"+n(E(X))+"元",1)])])],512))}},os=Q(Qe,[["__scopeId","data-v-ab2fffec"]]);export{os as default};
