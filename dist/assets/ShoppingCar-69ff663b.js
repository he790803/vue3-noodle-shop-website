import{_ as K,q as Q,s as Y,r as a,k as H,o as ee,g as se,E as ae,y as f,b as u,c as r,e,z as g,A as N,t as n,B as y,C as te,u as q,F as oe,f as le,n as ne,j as ue,p as re,i as ie}from"./index-b189cd52.js";import{u as Z}from"./shopping-8484545a.js";import{N as de}from"./NumInput-72e67dc4.js";const l=b=>(re("data-v-2028e9ac"),b=b(),ie(),b),ce={class:"userSection"},ve=l(()=>e("div",{class:"mainTitle"},[e("h1",null,"收件者資料")],-1)),_e={class:"userInformation"},me={class:"inputBox userName"},pe=l(()=>e("label",{for:"userName"},"姓名",-1)),he={key:0},fe={class:"inputBox userPhone"},ge=l(()=>e("label",{for:"userPhone"},"電話",-1)),ye={key:0},be={class:"inputBox userAddress"},Pe=l(()=>e("label",{for:"userAddress"},"收件地址",-1)),ke={key:0},Ee={class:"inputBox userEmail"},xe=l(()=>e("label",{for:"userEmail"},"電子郵件",-1)),Be={key:0},Se={class:"inputBox userPayment"},Ne=l(()=>e("option",{disabled:"disabled",selected:"selected",value:""},"付款方式",-1)),Ce=l(()=>e("option",{value:"visa"},"信用卡",-1)),Ae=l(()=>e("option",{value:"linePay"},"LinePay",-1)),Ie=l(()=>e("option",{value:"paypal"},"Paypal",-1)),Ue=[Ne,Ce,Ae,Ie],qe=l(()=>e("label",{for:"userPayment"},"付款方式",-1)),Me={key:0},Te={class:"itemSection"},Ve={class:"itemDescription"},ze={class:"mainTitle"},Le=l(()=>e("h1",null,"購物車",-1)),Re={class:"itemList"},we=["onAnimationend"],De={class:"itemImg"},He=["src"],Ze={class:"itemInformation"},$e={class:"title"},Fe={class:"itemTotalPriceGroup"},Oe={class:"itemNum"},je={class:"itemTotalPrice"},Ge=["onClick"],We={class:"totalPrice"},Xe={__name:"ShoppingCar",setup(b){const M=Q(),$=Z(),{removeShoppingCarItem:T}=Z(),{shoppingCar:i,orderList:F}=Y($),V=a(null),d=a(""),P=a(""),k=a(!1),v=a(""),C=a(""),E=a(!1),_=a(""),A=a(""),x=a(!1),m=a(""),I=a(""),B=a(!1),p=a(""),U=a(""),S=a(!1),c=a(!1),h=a(null),O=()=>{i.value.length<=0?alert("購物車是空的喔!"):!k.value||!E.value||!x.value||!B.value||!S.value?alert("資料尚未填寫齊全!"):(F.value.push({user:{name:d.value,phone:v.value,address:_.value,email:m.value,payMent:p.value},item:i.value}),M.push("/complete"))},j=(o,t)=>{i.value.map(s=>{s.id===t&&(s.number=o)})},G=o=>{c.value=!0,h.value=o,setTimeout(()=>{T(o),c.value=!1,h.value=null},500)},W=o=>{c.value&&h.value===o&&(T(o),c.value=!1,h.value=null)},X=H(()=>{let o=0;return i.value.forEach(t=>{o+=t.price*t.number}),o});H(()=>!(!d.value||P.value));const J=()=>{M.go(-1)},z=()=>{d.value?(k.value=!1,P.value=""):(k.value=!0,P.value="收件人不得為空!")},L=()=>{/^(09)[0-9]{8}$/.test(v.value)?(E.value=!1,C.value=""):(E.value=!0,C.value="手機格式錯誤!")},R=()=>{_.value?(x.value=!1,A.value=""):(x.value=!0,A.value="收件地址不得為空!")},w=()=>{/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(m.value)?(B.value=!1,I.value=""):(B.value=!0,I.value="Email格式錯誤!")},D=()=>{p.value?(S.value=!1,U.value=""):(S.value=!0,U.value="請選擇付款方式!")};return ee(()=>{se.to(V.value,{duration:1.5,width:"100%",ease:ae.easeInOut})}),f(d,z,{immediate:!1,deep:!1,debounce:500}),f(v,L,{immediate:!1,deep:!1,debounce:500}),f(_,R,{immediate:!1,deep:!1,debounce:500}),f(m,w,{immediate:!1,deep:!1,debounce:500}),f(p,D,{immediate:!1,deep:!1,debounce:500}),(o,t)=>(u(),r("div",{class:"ShoppingCar",ref_key:"background",ref:V},[e("div",ce,[ve,e("div",_e,[e("div",me,[g(e("input",{type:"text",id:"userName",required:"required","onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),onBlur:z},null,544),[[N,d.value]]),pe,k.value?(u(),r("span",he,n(P.value),1)):y("",!0)]),e("div",fe,[g(e("input",{type:"tel",name:"userPhone",id:"userPhone",required:"required","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),onBlur:L},null,544),[[N,v.value]]),ge,E.value?(u(),r("span",ye,n(C.value),1)):y("",!0)]),e("div",be,[g(e("input",{type:"text",name:"userAddress",required:"required","onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),onBlur:R},null,544),[[N,_.value]]),Pe,x.value?(u(),r("span",ke,n(A.value),1)):y("",!0)]),e("div",Ee,[g(e("input",{type:"text",name:"userEmail",required:"required","onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),onBlur:w},null,544),[[N,m.value]]),xe,B.value?(u(),r("span",Be,n(I.value),1)):y("",!0)]),e("div",Se,[g(e("select",{name:"userPayment",id:"userPayment","onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),onBlur:D},Ue,544),[[te,p.value]]),qe,S.value?(u(),r("span",Me,n(U.value),1)):y("",!0)])]),e("div",{class:"submitBtn"},[e("button",{onClick:J},"回上一頁"),e("button",{onClick:O},"送出訂單")])]),e("div",Te,[e("div",Ve,[e("div",ze,[Le,e("p",null,"已選購"+n(q(i).length)+"項",1)]),e("div",Re,[(u(!0),r(oe,null,le(q(i),(s,Je)=>(u(),r("div",{class:ne(["item",{animate__animated:c.value,animate__bounceOutRight:c.value&&h.value===s.id}]),key:s.id,onAnimationend:Ke=>W(s.id)},[e("div",De,[e("img",{src:s.imgLink},null,8,He)]),e("div",Ze,[e("div",$e,[e("div",null,n(s.name),1)]),e("div",Fe,[e("div",Oe,[ue(de,{onNumControlHandler:j,defineBuyNum:s.number,index:s.id},null,8,["defineBuyNum","index"])]),e("div",je,[e("p",null,"單價:"+n(s.price)+"元",1),e("p",null,"小計:"+n(s.price*s.number)+"元",1)])]),e("div",{class:"cancelBtn",onClick:()=>G(s.id)},"X",8,Ge)])],42,we))),128))])]),e("div",We,[e("p",null,"總計:"+n(q(X))+"元",1)])])],512))}},ss=K(Xe,[["__scopeId","data-v-2028e9ac"]]);export{ss as default};
